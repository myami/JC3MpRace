<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>race - CreateRace </title>
  <link href="https://fonts.googleapis.com/css?family=Passion+One" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Titillium+Web" rel="stylesheet">
  <link href="./md/materialize.min.css" rel="stylesheet">
  <script type="text/javascript" src="jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="./md/materialize.min.js"></script>


  <style>
    #Menu {
      position: fixed;
      /* make fixed */
      right: 35%;
      top: 35%;
      overflow: auto;
      font-size: 20px;
      font-family: 'Titillium Web', sans-serif;
      color: white;
      max-width: 500px;

      /*max-height:200px;*/
      /* uncomment */
    }

    form {
      padding: 5px;
      background-color: rgba(0, 0, 0, 0.7);
    }
    #Hidethemenu{
      position: absolute;
      right: 0;
    }

    .input-field:focus {
      border-bottom: 1px solid #ffc107!important;
      box-shadow: 0 1px 0 0 #ffc107!important;
    }

    select {
      max-width: 300px;
      max-height: 200px;
    }

    #VehicleSelectdiv {
      max-height: 200px;
    }
  </style>
</head>

<body>

  <div id="Menu">

    <form>
      <div id="Basics">
        <div id="ToolDiv">
          Which tool do you want to use :<br>
          <button class="waves-effect waves-light btn amber" type="button" id="Simpletoolb" onclick="SimpleTool()">Simple Tool</button>
          <button class="waves-effect waves-light btn amber" type="button" id="Advancedtoolb" onclick="AdvancedTool()">AdvancedTool</button>
        </div>
        <div id="CreateRacediv">
          Race name without space:<br>
          <input class="input-field" type="text" name="Racename" placeholder="Racename" id="Racenamev">
          <button class="waves-effect waves-light btn amber" type="button" id="RaceCreate" onclick="CreateRacebutton()">Create Race</button>
        </div>

      </div>

      <div id="RaceSetting">

        <div id="VehicleSelectdiv">
          <p>Select the vehicle type for the race you want to create: (Select on the menu before clicking next)</p>
          <select id="VehicleTypes" onchange="VehicleTypechange()" class="input-field">
              <option selected value="car">Car</option>
              <option value="airplane">Airplane</option>
              <option value="boats">Boats</option>
              <option value="helicopter">Helicopter</option>
              <option value="motorbike">Motorbike</option>
              <option value="wingsuit">Wingsuit</option>
            </select>
          <button class="waves-effect waves-light btn amber" type="button" id="vehicletypeb" onclick="hidevehicletype()">Next</button>
        </div>
        <div id="Timediv">
          <p>Time of the race : </p>
          <input class="input-field" type="text" name="Minute" placeholder="Hours" id="hours">
          <input class="input-field" type="text" name="Seconds" placeholder="Minutes" id="minute">
          <button class="waves-effect waves-light btn amber" type="button" id="TimeButon" onclick="AddTimeonrace()">Add time</button>
        </div>

        <div id="WeatherSelectdiv">
          <p>Select the weather you want: (select on the menu before clicking next)</p>
          <select id="weatherselect" onchange="WeatherChange()" class="input-field">
            <option value="base">base</option>
            <option value="fog">fog</option>
            <option value="rain">rain</option>
            <option value="thunderstorm">thunderstorm</option>
            <option value="snow">snow</option>
            <option value="overcast">overcast</option>
          </select>
          <button class="waves-effect waves-light btn amber" type="button" id="weatherb" onclick="hideweather()">Next</button>
        </div>
        <div id="MaxPlayerdiv">
          <p>MaxPlayer:</p>
          <input class="input-field" type="text" name="MaxPlayer" value="20" id="MaxPlayerv">
          <button class="waves-effect waves-light btn amber" type="button" id="maxplayerb" onclick="MaxPlayerf()">ChangeMaxPlayer</button>
        </div>

      </div>



      <div id="AdvancedOption">

        <div id="defaultVehiclediv">
          <p>Default Vehicle Hash</p>
          <input class="input-field" type="text" name="VehicleHash" placeholder="VehicleHash" id="vehiclehashid">
          <button class="waves-effect waves-light btn amber" type="button" id="Hashvehicleb" onclick="AddVehicleHash()">Add Hash</button>

        </div>
        <div id="AddingYatrespawndiv">
          <p>Adding Y at respawn : (more fore airplane,helicopter)</p>
          <input class="input-field" type="text" name="Yatrespawn" value="0" id="Yatrespawnv">
          <button class="waves-effect waves-light btn amber" type="button" id="Yatrespawnb" onclick="AddYatRespawn()">AddY</button>
        </div>
        <div id="CheckpointHashdiv">
          <p>CheckpointHash:</p>
          <input class="input-field" type="text" name="CheckpointHash" value="0x301477DB" id="CheckpointHashv">
          <button class="waves-effect waves-light btn amber" type="button" id="CheckpointHashb" onclick="AddCheckpointHash()">AddCheckpointHash</button>
        </div>

        <div id="ChekpointTypediv">
          <p>ChekpointType(0 is wingsuit and 1 vehicle):</p>
          <input class="input-field" type="text" name="CheckpointType" value="1" id="CheckpointTypev">
          <button class="waves-effect waves-light btn amber" type="button" id="CheckpointTypeb" onclick="AddCheckpointTypev()">AddCheckpointType</button>
        </div>

        <div id="PoiTypediv">
          <p>PoiType:</p>
          <input class="input-field" type="text" name="PoiType" value="10" id="PoiTypev">
          <button class="waves-effect waves-light btn amber" type="button" id="PoiTypeb" onclick="AddPoiType()">AddPoiType</button>
        </div>

        <div id="GhostPoiTypediv">
          <p>GhostPoiType:</p>
          <input class="input-field" type="text" name="GhostPoiType" value="23" id="GhostPoiTypev">
          <button class="waves-effect waves-light btn amber" type="button" id="GhostPoiTypeb" onclick="AddGhostPoiType()">AddGhostPoiType</button>
        </div>

        <div id="NitroEnableddiv">
          <p>Nitroenabled: (select on the menu before clicking next)</p>
          <select id="nitroselect" onchange="NitroChange()" class="input-field">
            <option value="true">true</option>
            <option value="false">false</option>
          </select>
          <button class="waves-effect waves-light btn amber" type="button" id="nitrob" onclick="hidenitro()">Next</button>
        </div>
        <div id="ImageDiv">
          <p>Path of the image in the imgs folder</p>
            <input class="input-field" type="text" name="RaceImage" placeholder="./imgs/test.png" id="RaceImage">
              <button class="waves-effect waves-light btn amber" type="button" id="RaceImageb" onclick="RaceImage()">AddRaceImage</button>
        </div>
        <div id="LapsDiv">
          <p>If you're race can have laps (0 is no)</p>
            <input class="input-field" type="text" name="GhostPoiType" value="0" id="Lapsid">
              <button class="waves-effect waves-light btn amber" type="button" id="Lapsidb" onclick="LapsNumber()">Add Laps</button>
        </div>
        <div id="RaceIDDiv">
          <p>Id of the race</p>
            <input class="input-field" type="text" name="GhostPoiType" value="0" id="RaceID">
              <button class="waves-effect waves-light btn amber" type="button" id="RaceIDb" onclick="RaceIdNumber()">Add id of the race</button>
        </div>
      </div>







      <div id="SpawningElement">

        <div id="StartingPointdiv">
          <p>Go at the position you want the starting point and press the StartingPoint button or press "G"</p>
          <button class="waves-effect waves-light btn amber" type="button" id="StartingPointRace" onclick="CreateStartingPoint()">Starting Point</button>
          <button class="waves-effect waves-light btn amber" type="button" id="hidestatingpoint" onclick="showcheckpointhidestatingpoint()">Next</button>
        </div>

        <div id="CheckpointPointdiv">
          <p>Press "C" to add a Checkpoint and press "L" to add a CameraView</p>
          <button class="waves-effect waves-light btn amber" type="button" id="CheckpointRace" onclick="CreateCheckpoint()">Checkpoint</button>
          <button class="waves-effect waves-light btn amber" type="button" id="CameraRace" onclick="CreateCamera()">CameraView</button>
          <button class="waves-effect waves-light btn amber" type="button" id="Hidethemenu" onclick="finishit()">End</button>

      </div>

      </div>




    </form>
  </div>

</body>
<script>
  let SimpleToolv = false;

  jcmp.AddEvent('ShowMenu', function() {
    jcmp.ShowCursor();
    // show first menu to create name without space
    $("#Menu").show();
    $("#ToolDiv").show();

  })
  jcmp.AddEvent('HideMenu', function() {
    jcmp.HideCursor();
    $("#Menu").hide();
  })


  $(document).ready(function() {
    $("#Menu").hide();
    $("#ToolDiv").hide();
    $("#CreateRacediv").hide();
    $("#VehicleSelectdiv").hide();
    $("#Timediv").hide();
    $("#WeatherSelectdiv").hide();
    $("#defaultVehiclediv").hide();
    $("#AddingYatrespawndiv").hide();
    $("#CheckpointHashdiv").hide();
    $("#ChekpointTypediv").hide();
    $("#PoiTypediv").hide();
    $("#GhostPoiTypediv").hide();
    $("#NitroEnableddiv").hide();
    $("#MaxPlayerdiv").hide();
    $("#ImageDiv").hide();
    $("#LapsDiv").hide();
    $("#RaceIDDiv").hide();
    $("#StartingPointdiv").hide();
    $("#CheckpointPointdiv").hide();
    $('#VehicleTypes').material_select();
    $('#weatherselect').material_select();
    $('#nitroselect').material_select();

  });



  function AdvancedTool() {
    SimpleToolv = false;
    $("#ToolDiv").hide();
    $("#CreateRacediv").show();
  }

  function SimpleTool() {
    SimpleToolv = true;
    $("#ToolDiv").hide();
    $("#CreateRacediv").show();
  }

  var nameoftherace;

  function CreateRacebutton() {
    let name = $("#Racenamev").val();
    let namewithoutspace = name.split(" ").join("")
    nameoftherace = namewithoutspace;
    jcmp.CallEvent('Create_race_name_button', namewithoutspace);
    jcmp.CallEvent('race_name', name, nameoftherace);
    $("#CreateRacediv").hide();
    $("#VehicleSelectdiv").show();
  }



  function VehicleTypechange() {
    var x = document.getElementById("VehicleTypes");
    var i = x.selectedIndex;
    let vehicletype = x.options[i].text;
    jcmp.CallEvent('Add_Vehicle_type', vehicletype, nameoftherace);
    // Set a default vehicle if choice simple tool
    if (SimpleToolv) {
      jcmp.CallEvent('AddVehicleSimpleBasic', vehicletype, nameoftherace);
    }
  }

  function hidevehicletype() {
    $("#VehicleSelectdiv").hide();
    $("#Timediv").show();
  }

  function AddTimeonrace() {
    let hours = $("#hours").val();
    let minute = $("#minute").val();
    jcmp.CallEvent('Add_Minute_second', parseInt(hours), parseInt(minute), nameoftherace);
    $("#Timediv").hide();
    $("#WeatherSelectdiv").show();
  }


  function WeatherChange() {
    var x = document.getElementById("weatherselect");
    var i = x.selectedIndex;
    let weather = x.options[i].text;
    jcmp.CallEvent('Add_Weather', weather, nameoftherace);

  }

  function hideweather() {
    if (SimpleToolv) {
      $("#WeatherSelectdiv").hide();
      $("#NitroEnableddiv").show();
    } else {
      $("#WeatherSelectdiv").hide();
      $("#defaultVehiclediv").show();
    }
  }

  function AddVehicleHash() {
    let vehiclehash = $("#vehiclehashid").val();
    jcmp.CallEvent('Add_vehicle_hash', parseInt(vehiclehash), nameoftherace);
    $("#defaultVehiclediv").hide();
    $("#AddingYatrespawndiv").show();


  }

  function AddYatRespawn() {
    let yatrespawn = $("#Yatrespawnv").val();
    jcmp.CallEvent('Add_Yatrespawn', parseInt(yatrespawn), nameoftherace);
    $("#AddingYatrespawndiv").hide();
    $("#CheckpointHashdiv").show();


  }

  function AddCheckpointHash() {
    let checkpointhash = $("#CheckpointHashv").val();
    jcmp.CallEvent('Add_CheckpointHash', parseInt(checkpointhash), nameoftherace);
    $("#CheckpointHashdiv").hide();
    $("#ChekpointTypediv").show();


  }

  function AddCheckpointTypev() {
    let CheckpointType = $("#CheckpointTypev").val();
    jcmp.CallEvent('Add_CheckpointType', parseInt(CheckpointType), nameoftherace);
    $("#ChekpointTypediv").hide();
    $("#PoiTypediv").show();


  }

  function AddPoiType() {
    let PoiType = $("#PoiTypev").val();
    jcmp.CallEvent('Add_PoiType', parseInt(PoiType), nameoftherace);
    $("#PoiTypediv").hide();
    $("#GhostPoiTypediv").show();


  }

  function AddGhostPoiType() {
    let GhostPoiType = $("#GhostPoiTypev").val();
    jcmp.CallEvent('Add_GhostPoiType', parseInt(GhostPoiType), nameoftherace);
    $("#GhostPoiTypediv").hide();
    $("#NitroEnableddiv").show();


  }

  function NitroChange() {
    var x = document.getElementById("nitroselect");
    var i = x.selectedIndex;
    let nitro = x.options[i].text;
    jcmp.CallEvent('Add_NitroChange', nitro, nameoftherace);
  }

  function hidenitro() {
    $("#NitroEnableddiv").hide();
    $("#MaxPlayerdiv").show();
  }

  function MaxPlayerf() {
    let MaxPlayer = $("#MaxPlayerv").val();
    jcmp.CallEvent('Add_MaxPlayer', parseInt(MaxPlayer), nameoftherace);
    $("#MaxPlayerdiv").hide();
    $("#ImageDiv").show();
  }
  function RaceImage() {
    let RaceImage = $("#RaceImage").val();
    jcmp.CallEvent('RaceImagePath', RaceImage, nameoftherace);
    $("#ImageDiv").hide();
    $("#LapsDiv").show();

  }
function LapsNumber (){
    let lapsnumber = $("#Lapsid").val();
    jcmp.CallEvent('LapsNumber', parseInt(lapsnumber), nameoftherace);
    $("#LapsDiv").hide();
    $("#RaceIDDiv").show();

}
function RaceIdNumber (){
  let RaceIDnumber = $("#RaceID").val();
  jcmp.CallEvent('RaceIdNumber', parseInt(RaceIDnumber), nameoftherace);
  $("#RaceIDDiv").hide();
  $("#StartingPointdiv").show();
  startingpointcan =true;
}


  function CreateStartingPoint() {
    jcmp.CallEvent('CreateStartingPoint', nameoftherace);
  }

  function showcheckpointhidestatingpoint() {
    $("#StartingPointdiv").hide();
    $("#CheckpointPointdiv").show();
    startingpointcan = false;
    checkpointcan = true;
  }

  function CreateCheckpoint() {
      avoiddoublepoint = false;
    jcmp.CallEvent('CreateCheckpoint', nameoftherace);
    setTimeout(function() {
    avoiddoublepoint = true;
    }, 1000);
  }
  function CreateCamera() {
      avoiddoublepoints = false;
    jcmp.CallEvent('CreateCamera', nameoftherace);
    setTimeout(function() {
    avoiddoublepoints = true;
    }, 1000);
  }


  function finishit() {
    resetalltohide();
    jcmp.HideCursor();
    jcmp.CallEvent('DeletePOI');
    jcmp.CallEvent('DeleteCheckpoint');
    checkpointcan = false;
  }

  function resetalltohide() {
    $("#Menu").hide();
    $("#ToolDiv").hide();
    $("#CreateRacediv").hide();
    $("#VehicleSelectdiv").hide();
    $("#Timediv").hide();
    $("#WeatherSelectdiv").hide();
    $("#defaultVehiclediv").hide();
    $("#AddingYatrespawndiv").hide();
    $("#CheckpointHashdiv").hide();
    $("#ChekpointTypediv").hide();
    $("#PoiTypediv").hide();
    $("#GhostPoiTypediv").hide();
    $("#NitroEnableddiv").hide();
    $("#MaxPlayerdiv").hide();
    $("#StartingPointdiv").hide();
    $("#CheckpointPointdiv").hide();
  }
let $chat_input_visible = false;
let startingpointcan = false;
let checkpointcan = false;
let avoiddoublepoint = true;
let avoiddoublepoints = true;
  jcmp.AddEvent('chat_input_state', function(b) {
              $chat_input_visible = b;
          });

  $(window).keyup(function(event) {
    const key = event.which;
    if (key === 71 && !$chat_input_visible && startingpointcan) { // g
        CreateStartingPoint();
    }
    else if (key === 67 && !$chat_input_visible && checkpointcan && avoiddoublepoint){ //c
        CreateCheckpoint();
    }
    else if (key === 76 && !$chat_input_visible && checkpointcan && avoiddoublepoint){ //c
        CreateCamera();
    }
  });
</script>

</html>
